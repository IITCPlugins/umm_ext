// ==UserScript==
// @name            IITC plugin: UMM_Ext
// @id              iitc_plugin_UMM_Ext
// @category        Misc
// @version         0.0.0.260205.162711
// @namespace       https://github.com/IITC-CE/ingress-intel-total-conversion
// @description     Ultimate Mission Maker - Extention
// @match           https://intel.ingress.com/*
// @author          McBen
// @icon64          data:image/png;base64,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
// ==/UserScript==
function wrapper(SCRIPT_INFO) {
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./src/styles.css"
/*!****************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./src/styles.css ***!
  \****************************************************************************************************************************************************************/
(module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \"./node_modules/css-loader/dist/runtime/noSourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\"]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/styles.css?./node_modules/css-loader/dist/cjs.js??ruleSet%5B1%5D.rules%5B1%5D.use%5B1%5D!./node_modules/postcss-loader/dist/cjs.js??ruleSet%5B1%5D.rules%5B1%5D.use%5B2%5D\n}");

/***/ },

/***/ "./node_modules/css-loader/dist/runtime/api.js"
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
(module) {

eval("{\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./node_modules/css-loader/dist/runtime/api.js?\n}");

/***/ },

/***/ "./node_modules/css-loader/dist/runtime/noSourceMaps.js"
/*!**************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/noSourceMaps.js ***!
  \**************************************************************/
(module) {

eval("{\n\nmodule.exports = function (i) {\n  return i[1];\n};\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./node_modules/css-loader/dist/runtime/noSourceMaps.js?\n}");

/***/ },

/***/ "./node_modules/iitcpluginkit/dist/Plugin.js"
/*!***************************************************!*\
  !*** ./node_modules/iitcpluginkit/dist/Plugin.js ***!
  \***************************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Register: () => (/* binding */ Register)\n/* harmony export */ });\n/*\n*   Usage example:\n\n    import * as Plugin from \"../plugin\";\n\n    class myPlugin implements Plugin.Class {\n        init() {\n            console.log(\"Hello World!\");\n        }\n    }\n\n    Plugin.Register(new myPlugin(), \"myPlugin\");\n*/\n/// <reference path=\"../types/index.d.ts\" />\nfunction Register(plugin, name) {\n    const setup = () => {\n        window.plugin[name] = plugin;\n        window.plugin[name].init();\n    };\n    setup.info = SCRIPT_INFO;\n    if (!window.bootPlugins) {\n        window.bootPlugins = [];\n    }\n    window.bootPlugins.push(setup);\n    if (window.iitcLoaded) {\n        setup();\n    }\n}\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./node_modules/iitcpluginkit/dist/Plugin.js?\n}");

/***/ },

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
(module) {

eval("{\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?\n}");

/***/ },

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js"
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
(module) {

eval("{\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./node_modules/style-loader/dist/runtime/insertBySelector.js?\n}");

/***/ },

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js"
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
(module) {

eval("{\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./node_modules/style-loader/dist/runtime/insertStyleElement.js?\n}");

/***/ },

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
(module, __unused_webpack_exports, __webpack_require__) {

eval("{\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce =  true ? __webpack_require__.nc : 0;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js?\n}");

/***/ },

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js"
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
(module) {

eval("{\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./node_modules/style-loader/dist/runtime/styleDomAPI.js?\n}");

/***/ },

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js"
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
(module) {

eval("{\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./node_modules/style-loader/dist/runtime/styleTagTransform.js?\n}");

/***/ },

/***/ "./src/Main.ts"
/*!*********************!*\
  !*** ./src/Main.ts ***!
  \*********************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   main: () => (/* binding */ main)\n/* harmony export */ });\n/* harmony import */ var iitcpluginkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! iitcpluginkit */ \"./node_modules/iitcpluginkit/dist/Plugin.js\");\n/* harmony import */ var _UI_RenderPath__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UI/RenderPath */ \"./src/UI/RenderPath.ts\");\n/* harmony import */ var _UI_RenderNumbers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./UI/RenderNumbers */ \"./src/UI/RenderNumbers.ts\");\n/* harmony import */ var _State_State__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./State/State */ \"./src/State/State.ts\");\n/* harmony import */ var _PortalAdd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PortalAdd */ \"./src/PortalAdd.ts\");\n/* harmony import */ var _UI_Dialog_About__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./UI/Dialog/About */ \"./src/UI/Dialog/About.ts\");\n/* harmony import */ var _UI_Dialog_Options__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./UI/Dialog/Options */ \"./src/UI/Dialog/Options.ts\");\n\n\n\n\n\n\n\n// eslint-disable-next-line unicorn/prevent-abbreviations\nclass UMM_Ext {\n    init() {\n        // eslint-disable-next-line @typescript-eslint/no-require-imports\n        __webpack_require__(/*! ./styles.css */ \"./src/styles.css\");\n        this.umm = window.plugin.umm;\n        if (!this.umm) {\n            console.error(\"UMM_Ext: UMM plugin not found!\");\n            return;\n        }\n        this.state = new _State_State__WEBPACK_IMPORTED_MODULE_3__.State();\n        this.renderPath = new _UI_RenderPath__WEBPACK_IMPORTED_MODULE_1__.RenderPath(this.umm.ummMissionPaths);\n        this.renderNumbers = new _UI_RenderNumbers__WEBPACK_IMPORTED_MODULE_2__.RenderNumbers(this.umm.ummMissionNumbers);\n        this.patch();\n    }\n    get ori() { return this.umm; }\n    redrawAll() {\n        this.renderPath.redraw();\n        this.renderNumbers.redraw();\n        this.umm.updatePortalCountSidebar();\n    }\n    patch() {\n        this.replaceToolboxButton();\n        this.monkeyPatchState();\n        this.monkeyPatchDrawing();\n        this.monkeyPatchNumbers();\n        this.monkeyPatchMissionSelect();\n        this.monkeyPatchPortalAdd();\n        this.monkeyPatchDialogs();\n    }\n    // Patch - Use Toolbox as visibilty toggle\n    replaceToolboxButton() {\n        // delay removal, IDK who why when moves the button around\n        window.setTimeout(() => {\n            $('#toolbox a:contains(\"UMM Opt\")').remove();\n            $('#toolbox_component a:contains(\"UMM Opt\")').remove();\n        }, 500);\n        // create new\n        $('#toolbox').append($('<a>', { text: \"UMM\", title: \"Ultimate Mission Maker\", click: () => $('.leaflet-umm.leaflet-bar').toggle() }));\n        // hide toolbar as default\n        $('.leaflet-umm.leaflet-bar').hide();\n    }\n    // Patch - State management\n    monkeyPatchState() {\n        this.ori.getUmmState = () => this.state.get();\n        this.ori.saveUmmState = (_ummState) => {\n            // we assume the state is already updated\n            this.state.save();\n        };\n        window.removeHook('portalDetailsUpdated', this.ori.updateMissionPortalsDetails);\n        this.ori.clearMissionData = () => {\n            this.state.reset();\n            this.state.save();\n            this.umm.updateCurrentActiveMissionSidebar(this.state.get());\n            this.umm.reloadSettingsWindowIfNeeded();\n            if (this.umm.missionModeActive) {\n                this.umm.toggleMissionMode();\n            }\n            this.renderPath.redraw();\n            this.renderNumbers.redraw();\n        };\n    }\n    // Patch - Path editing\n    monkeyPatchDrawing() {\n        // Patch - Inject our Path Renderer\n        this.ori.drawMissions = () => this.renderPath.redraw();\n        // Patch - redraw on mission mode toggle\n        const ori = this.umm.toggleMissionMode;\n        this.ori.toggleMissionMode = () => {\n            ori();\n            this.renderPath.redraw();\n        };\n        // init repaint\n        this.renderPath.redraw();\n    }\n    // Patch - Autonumbers\n    monkeyPatchNumbers() {\n        // Patch - Inject our Number Renderer\n        this.ori.refreshMissionNumbers = () => this.renderNumbers.redraw();\n    }\n    // Patch - Select every mission - even when empty\n    monkeyPatchMissionSelect() {\n        this.ori.nextMission = () => this.state.nextMission();\n        this.ori.previousMission = () => this.state.prevMission();\n    }\n    // Patch - refresh our drawing on new Portal add\n    monkeyPatchPortalAdd() {\n        window.addHook('portalSelected', (event) => (0,_PortalAdd__WEBPACK_IMPORTED_MODULE_4__.addPortalToCurrentMission)(event));\n        window.removeHook('portalSelected', this.ori.addPortalToCurrentMission);\n        this.ori.addPortalToCurrentMission = _PortalAdd__WEBPACK_IMPORTED_MODULE_4__.addPortalToCurrentMission;\n    }\n    monkeyPatchDialogs() {\n        this.ori.about = _UI_Dialog_About__WEBPACK_IMPORTED_MODULE_5__.about;\n        this.ori.showUmmOptions = _UI_Dialog_Options__WEBPACK_IMPORTED_MODULE_6__.showUmmOptions;\n    }\n}\n/**\n * use \"main\" to access you main class from everywhere\n * (same as window.plugin.UMM_Ext)\n */\nconst main = new UMM_Ext();\niitcpluginkit__WEBPACK_IMPORTED_MODULE_0__.Register(main, \"UMM_Ext\");\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/Main.ts?\n}");

/***/ },

/***/ "./src/PortalAdd.ts"
/*!**************************!*\
  !*** ./src/PortalAdd.ts ***!
  \**************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addPortalToCurrentMission: () => (/* binding */ addPortalToCurrentMission)\n/* harmony export */ });\n/* harmony import */ var _Main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Main */ \"./src/Main.ts\");\n/* harmony import */ var _UI_Notification__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UI/Notification */ \"./src/UI/Notification.ts\");\n\n\nlet lastPortal;\nconst addPortalToCurrentMission = (data) => {\n    var _a;\n    const state = _Main__WEBPACK_IMPORTED_MODULE_0__.main.state;\n    // we are not in edit mode or it is the first selection\n    if (!_Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.missionModeActive || _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.missionModeResuming) {\n        _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.missionModeResuming = false;\n        return;\n    }\n    if (lastPortal === data.selectedPortalGuid) {\n        return;\n    }\n    lastPortal = data.selectedPortalGuid;\n    const mission = state.getEditMission();\n    if (!mission)\n        return;\n    const portalToAdd = mission.portals.create(data.selectedPortalGuid);\n    if (mission.portals.includes(portalToAdd)) {\n        if (((_a = mission.portals.get(-1)) === null || _a === void 0 ? void 0 : _a.guid) !== portalToAdd.guid) {\n            const pstate = state.get();\n            (0,_UI_Notification__WEBPACK_IMPORTED_MODULE_1__.notification)(`${pstate.missionSetName}\\nPortal already in mission #${pstate.currentMission + 1}`);\n        }\n    }\n    else {\n        const preMission = state.missions.previous(mission);\n        if (preMission && preMission.portals.includes(portalToAdd) &&\n            (!preMission.portals.isStart(portalToAdd) && !preMission.portals.isEnd(portalToAdd))) {\n            if (confirm(\"Split mission?\")) {\n                const index = preMission.portals.indexOf(portalToAdd);\n                mission.portals.clear();\n                state.missions.split(preMission, index, mission);\n                state.save();\n                _Main__WEBPACK_IMPORTED_MODULE_0__.main.redrawAll();\n                return;\n            }\n        }\n        // TODO: if portal is in previous mission ask for \"split\"\n        mission.portals.add(portalToAdd);\n        state.save();\n        _Main__WEBPACK_IMPORTED_MODULE_0__.main.redrawAll();\n        const pstate = state.get();\n        (0,_UI_Notification__WEBPACK_IMPORTED_MODULE_1__.notification)(`${pstate.missionSetName}\\nAdded to mission #${pstate.currentMission + 1}`);\n    }\n};\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/PortalAdd.ts?\n}");

/***/ },

/***/ "./src/State/Mission.ts"
/*!******************************!*\
  !*** ./src/State/Mission.ts ***!
  \******************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Mission: () => (/* binding */ Mission)\n/* harmony export */ });\n/* harmony import */ var _Portals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Portals */ \"./src/State/Portals.ts\");\n\nclass Mission {\n    constructor(id, data) {\n        this.missionID = id;\n        this.data = data;\n        this.portal_data = new _Portals__WEBPACK_IMPORTED_MODULE_0__.Portals(data.portals);\n    }\n    get title() {\n        return this.data.missionTitle;\n    }\n    get portals() {\n        return this.portal_data;\n    }\n    get id() {\n        return this.missionID;\n    }\n    hasPortals() {\n        return this.portal_data.length > 0;\n    }\n    getLocations() {\n        return this.portal_data.toLatLng();\n    }\n    show() {\n        if (this.hasPortals()) {\n            const bounds = new L.LatLngBounds(this.getLocations()).pad(0.2);\n            window.map.fitBounds(bounds, { maxZoom: 18 });\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/State/Mission.ts?\n}");

/***/ },

/***/ "./src/State/Missions.ts"
/*!*******************************!*\
  !*** ./src/State/Missions.ts ***!
  \*******************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Missions: () => (/* binding */ Missions)\n/* harmony export */ });\n/* harmony import */ var _Mission__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Mission */ \"./src/State/Mission.ts\");\n\nclass Missions {\n    constructor(data) {\n        this.data = data;\n    }\n    get(missionId) {\n        const mis = this.data[missionId];\n        return mis && new _Mission__WEBPACK_IMPORTED_MODULE_0__.Mission(missionId, mis);\n    }\n    count() {\n        return this.data.length;\n    }\n    forEach(callback) {\n        this.data.forEach((missionData, index) => {\n            const mission = new _Mission__WEBPACK_IMPORTED_MODULE_0__.Mission(index, missionData);\n            callback(mission, index);\n        });\n    }\n    previous(mission) {\n        var _a;\n        let preMissionID = mission.id - 1;\n        let preMission;\n        while (!((_a = (preMission = this.get(preMissionID))) === null || _a === void 0 ? void 0 : _a.hasPortals()) && preMissionID > 0)\n            preMissionID--;\n        return preMission;\n    }\n    next(mission) {\n        return this.get(mission.id + 1);\n    }\n    merge(destination, missionB) {\n        destination.portals.add(...missionB.portals.getRange());\n        missionB.portals.clear();\n    }\n    split(source, at, destination) {\n        const toMove = source.portals.getRange(at);\n        destination.portals.insert(0, ...toMove);\n        source.portals.remove(at, toMove.length);\n    }\n}\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/State/Missions.ts?\n}");

/***/ },

/***/ "./src/State/Portals.ts"
/*!******************************!*\
  !*** ./src/State/Portals.ts ***!
  \******************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Portals: () => (/* binding */ Portals)\n/* harmony export */ });\nclass Portals {\n    constructor(data) {\n        this.data = data;\n    }\n    get length() {\n        return this.data.length;\n    }\n    /**\n     *\n     * @param index negative values count from the end\n     */\n    get(index) {\n        return this.data.at(index);\n    }\n    getRange(start, end) {\n        return this.data.slice(start, end);\n    }\n    set(index, portal) {\n        this.data[index] = portal;\n    }\n    add(...portal) {\n        console.assert(!portal.some(p => this.includes(p)), \"portal is already in\");\n        this.data.push(...portal);\n    }\n    insert(index, ...portal) {\n        console.assert(!portal.some(p => this.includes(p)), \"portal is already in\");\n        this.data.splice(index, 0, ...portal);\n    }\n    remove(index, count = 1) {\n        this.data.splice(index, count);\n    }\n    clear() {\n        this.data.length = 0;\n    }\n    toLatLng() {\n        return this.data.map(portal => new L.LatLng(portal.location.latitude, portal.location.longitude));\n    }\n    includes(portal) {\n        return this.data.some(x => x.guid === portal.guid);\n    }\n    indexOf(portal) {\n        return this.data.findIndex(x => x.guid === portal.guid);\n    }\n    isStart(portal) {\n        var _a;\n        return ((_a = this.data[0]) === null || _a === void 0 ? void 0 : _a.guid) === portal.guid;\n    }\n    isEnd(portal) {\n        var _a;\n        return ((_a = this.data.at(-1)) === null || _a === void 0 ? void 0 : _a.guid) === portal.guid;\n    }\n    create(guid) {\n        const iitcPortal = window.portals[guid];\n        console.assert(iitcPortal, \"portal not defined\");\n        // TODO try to get full details of iitc-cache\n        const options = iitcPortal.options.data;\n        const ll = iitcPortal.getLatLng();\n        return {\n            guid,\n            title: options.title || '[undefined]',\n            imageUrl: options.image,\n            description: \"\",\n            location: { latitude: ll.lat, longitude: ll.lng },\n            isOrnamented: false,\n            isStartPoint: false,\n            type: \"PORTAL\",\n            objective: { type: \"HACK_PORTAL\", passphrase_params: { question: \"\", _single_passphrase: \"\" } }\n        };\n    }\n}\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/State/Portals.ts?\n}");

/***/ },

/***/ "./src/State/State.ts"
/*!****************************!*\
  !*** ./src/State/State.ts ***!
  \****************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   State: () => (/* binding */ State)\n/* harmony export */ });\n/* harmony import */ var _Main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Main */ \"./src/Main.ts\");\n/* harmony import */ var _StateMigration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StateMigration */ \"./src/State/StateMigration.ts\");\n/* harmony import */ var _Missions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Missions */ \"./src/State/Missions.ts\");\n/* harmony import */ var _UI_Notification__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../UI/Notification */ \"./src/UI/Notification.ts\");\n\n\n\n\nconst STORAGE_KEY = \"ultimate-mission-maker\";\nconst fileFormatVersion = 2;\nclass State {\n    constructor() {\n        this.load();\n        window.addHook(\"portalDetailsUpdated\", event => this.checkPortal(event));\n    }\n    get() {\n        return this.theState;\n    }\n    load() {\n        this.reset();\n        const data = localStorage.getItem(STORAGE_KEY);\n        if (data) {\n            const anyState = JSON.parse(data);\n            this.theState = (0,_StateMigration__WEBPACK_IMPORTED_MODULE_1__.migrateUmmVersion)(this, anyState);\n        }\n    }\n    save() {\n        this.setPlannedLength(this.theState.plannedBannerLength); // TODO: remove when \"get\" is private/removed\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(this.theState));\n    }\n    reset() {\n        this.theState = {\n            missionSetName: '',\n            missionSetDescription: '',\n            currentMission: 0,\n            plannedBannerLength: 1,\n            titleFormat: \"T NN-M\",\n            fileFormatVersion: fileFormatVersion,\n            missions: [\n                {\n                    missionTitle: '',\n                    missionDescription: '',\n                    portals: []\n                }\n            ],\n        };\n    }\n    getPlannedLength() {\n        return this.theState.plannedBannerLength;\n    }\n    setPlannedLength(count) {\n        count = Math.max(count, 1);\n        this.theState.plannedBannerLength = count;\n        if (this.theState.missions.length > count) {\n            this.theState.missions = this.theState.missions.slice(0, count);\n        }\n        else {\n            for (let id = this.theState.missions.length; id < count; id++) {\n                this.theState.missions.push({\n                    missionTitle: this.generateMissionTitle(id),\n                    missionDescription: this.theState.missionSetDescription,\n                    portals: []\n                });\n            }\n        }\n    }\n    get missions() {\n        return new _Missions__WEBPACK_IMPORTED_MODULE_2__.Missions(this.theState.missions);\n    }\n    generateMissionTitle(missNumber) {\n        return this.generateMissionTitleEx(missNumber, this.getPlannedLength(), this.theState.missionSetName, this.theState.titleFormat);\n    }\n    generateMissionTitleEx(missNumber, plannedBannerLength, missSetName, missNameFormat) {\n        var _a;\n        // eslint-disable-next-line unicorn/prefer-default-parameters\n        const format = missNameFormat !== null && missNameFormat !== void 0 ? missNameFormat : \"\";\n        if (!format) {\n            return \"\";\n        }\n        let title = format;\n        const totalMissions = plannedBannerLength !== null && plannedBannerLength !== void 0 ? plannedBannerLength : 0;\n        // Replace total mission count (M+)\n        if (totalMissions >= 1) {\n            title = title.replace(/M+/g, totalMissions.toString());\n        }\n        // Replace mission number (N or N+)\n        if (missNumber >= 0) {\n            const numberPattern = (_a = format.match(/N+/g)) === null || _a === void 0 ? void 0 : _a[0];\n            if (numberPattern) {\n                const length = numberPattern.length > 1 ? totalMissions.toString().length : 0;\n                const paddedNumber = window.zeroPad(missNumber, length);\n                title = title.replace(/N+/g, paddedNumber);\n            }\n        }\n        // Replace mission set name (T)\n        if (missSetName === null || missSetName === void 0 ? void 0 : missSetName.trim()) {\n            title = title.replace(/T/g, missSetName);\n        }\n        return title;\n    }\n    getEditMission() {\n        return this.missions.get(this.theState.currentMission);\n    }\n    isCurrent(missionId) {\n        return this.theState.currentMission === missionId;\n    }\n    nextMission() {\n        if (this.theState.currentMission >= this.theState.plannedBannerLength - 1)\n            return;\n        // Activate the new mission\n        _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.setCurrentMission(this.theState.currentMission + 1);\n        const mission = this.missions.get(this.theState.currentMission);\n        console.assert(mission, \"no mission found\");\n        if (mission.hasPortals()) {\n            this.showMission(mission);\n        }\n        else {\n            (0,_UI_Notification__WEBPACK_IMPORTED_MODULE_3__.notification)(`${this.theState.missionSetName}\\nStart of mission #${this.theState.currentMission + 1}\\nSelect start portal.`);\n        }\n    }\n    prevMission() {\n        if (this.theState.currentMission <= 0)\n            return;\n        // Activate the new mission\n        _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.setCurrentMission(this.theState.currentMission - 1);\n        const mission = this.missions.get(this.theState.currentMission);\n        console.assert(mission, \"no mission found\");\n        if (mission.hasPortals()) {\n            this.showMission(mission);\n        }\n    }\n    showMission(mission) {\n        if (mission.hasPortals()) {\n            mission.show();\n            _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.updatePortalCountSidebar();\n            if (_Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.missionModeActive) {\n                (0,_UI_Notification__WEBPACK_IMPORTED_MODULE_3__.notification)(`Mission mode active.\\n${this.theState.missionSetName}\\nCurrent mission #${this.theState.currentMission + 1}\\nSelect next portal`);\n            }\n            else {\n                (0,_UI_Notification__WEBPACK_IMPORTED_MODULE_3__.notification)(`${this.theState.missionSetName}\\nCurrent active mission set to #${this.theState.currentMission + 1}`);\n            }\n        }\n    }\n    checkPortal(event) {\n        let updated = false;\n        this.theState.missions.forEach(mission => {\n            const portal = mission.portals.find(x => x.guid === event.guid);\n            if (portal) {\n                if (portal.imageUrl !== event.portalData.image ||\n                    portal.title !== event.portalData.title) {\n                    portal.imageUrl = event.portalData.image;\n                    portal.title = event.portalData.title;\n                    updated = true;\n                }\n            }\n        });\n        if (updated)\n            this.save();\n    }\n}\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/State/State.ts?\n}");

/***/ },

/***/ "./src/State/StateMigration.ts"
/*!*************************************!*\
  !*** ./src/State/StateMigration.ts ***!
  \*************************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   migrateUmmVersion: () => (/* binding */ migrateUmmVersion)\n/* harmony export */ });\nconst migrateUmmVersion = (state, ummState) => {\n    // Original beta didn't have a fileFormatVersion yet\n    if (ummState.fileFormatVersion === undefined || ummState.fileFormatVersion === \"\") {\n        // Because of slight variations on BETA's we do some checks to avoid overwriting any data\n        const undefinedOrEmptyString = (value) => {\n            if (value == undefined || value == \"\") {\n                return true;\n            }\n            return false;\n        };\n        if (undefinedOrEmptyString(ummState.missionSetName)) {\n            // Check if old name was set, if so, use that for missionSetName, otherwise set blank\n            if (undefinedOrEmptyString(ummState.missionName)) {\n                ummState.missionSetName = '';\n            }\n            else {\n                ummState.missionSetName = ummState.missionName;\n                delete ummState.missionName; // Remove old field from state\n            }\n        }\n        if (undefinedOrEmptyString(ummState.missionSetDescription)) {\n            if (undefinedOrEmptyString(ummState.missionDescription)) {\n                ummState.missionSetDescription = '';\n            }\n            else {\n                ummState.missionSetDescription = ummState.missionDescription;\n                delete ummState.missionDescription; // Remove old field from state\n            }\n        }\n        if (undefinedOrEmptyString(ummState.titleFormat)) {\n            ummState.titleFormat = 'T NN-M';\n        }\n        // Rename numberofMissions to plannedBannerLength if present, otherwise set to current banner length\n        if (ummState.numberOfMissions === undefined) {\n            ummState.plannedBannerLength = Object.keys(ummState.missions).length;\n        }\n        else {\n            ummState.plannedBannerLength = ummState.numberOfMissions;\n            delete ummState.numberOfMissions;\n        }\n        // Check if the data is using the oldest beta format or a newer version, newer versions don't need converting for V1.\n        if (!Object.keys(ummState.missions[0]).includes(\"portals\")) {\n            // Old format detected, check if data is present\n            if (ummState.missions[0][0].guid) {\n                // Data present, convert necessary\n                const newMissions = [];\n                for (const mission in ummState.missions) {\n                    const plannedLength = (ummState.plannedBannerLength > 0 ? ummState.plannedBannerLength : ummState.missions.length);\n                    const missionTitle = state.generateMissionTitleEx(parseInt(mission) + 1, plannedLength, ummState.missionSetName, ummState.titleFormat);\n                    newMissions.push({ missionTitle: missionTitle, missionDescription: ummState.missionSetDescription, portals: ummState.missions[mission] });\n                }\n                ummState.missions = newMissions;\n            }\n            else {\n                // No data detected, just set it to an empty state.\n                ummState.missions = [{ missionTitle: '', missionDescription: '', portals: [] }];\n            }\n        }\n        ummState.fileFormatVersion = 1;\n    }\n    if (ummState.fileFormatVersion === 1) {\n        // FileFormatVersion 2 supports custom objectives for portals\n        // Valid type values are: HACK_PORTAL, INSTALL_MOD, CAPTURE_PORTAL, CREATE_LINK, CREATE_FIELD, PASSPHRASE\n        // NIA will ignore passphrase_params if type is not passphrase\n        for (const mission in ummState.missions) {\n            for (const portal in ummState.missions[mission].portals) {\n                ummState.missions[mission].portals[portal].objective = { type: \"HACK_PORTAL\", passphrase_params: { question: \"\", _single_passphrase: \"\" } };\n            }\n        }\n        ummState.fileFormatVersion = 2;\n    }\n    if (ummState.fileFormatVersion === 2) {\n        // Bugfix for 0.4.0, unintentionally it had objective type HACK rather than HACK_PORTAL, not a full new fileFormatVersion\n        for (const mission in ummState.missions) {\n            for (const portal in ummState.missions[mission].portals) {\n                if (ummState.missions[mission].portals[portal].objective.type === \"HACK\") {\n                    ummState.missions[mission].portals[portal].objective.type = \"HACK_PORTAL\";\n                }\n            }\n        }\n        // UMM-EX uses empty missions\n        state.setPlannedLength(ummState.plannedBannerLength || 1);\n    }\n    return ummState;\n};\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/State/StateMigration.ts?\n}");

/***/ },

/***/ "./src/UI/Dialog/About.ts"
/*!********************************!*\
  !*** ./src/UI/Dialog/About.ts ***!
  \********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   about: () => (/* binding */ about)\n/* harmony export */ });\n/* harmony import */ var _Main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Main */ \"./src/Main.ts\");\n/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Button */ \"./src/UI/Dialog/Button.ts\");\n/* harmony import */ var _Options__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Options */ \"./src/UI/Dialog/Options.ts\");\n\n\n\nconst about = () => {\n    let html = '<div class=\"umm-options-list\">';\n    html += 'In short: Create missions in IITC, export as a json file:<br>';\n    html += '<a href=\"https://intel.ingress.com/\" target=\"_blank\"' + (/^intel\\.ingress\\.com$/i.test(window.location.host) ? ' style=\"color: #bbb; pointer-events: none; cursor: default;\"' : '') + '>https://intel.ingress.com/</a>';\n    html += 'Then open the mission creator and load the json file.<br>';\n    html += 'Start creating missions and import the UMM data for every mission:<br>';\n    html += '<a href=\"https://missions.ingress.com/\" target=\"_blank\"' + (/^missions\\.ingress\\.com$/i.test(window.location.host) ? ' style=\"color: #bbb; pointer-events: none; cursor: default;\"' : '') + '>https://missions.ingress.com/</a>';\n    html += 'Documentation for this plugin can be found at:<br>';\n    html += '<a href=\"https://umm.8bitnoise.rocks/\" target=\"_blank\">https://umm.8bitnoise.rocks/</a>';\n    html += 'Questions, feature requests and tips:<br>';\n    html += '<a href=\"https://t.me/joinchat/j9T9eLfa3VJlZWE0\" target=\"_blank\">Telegram: [XF] Ultimate Mission Maker</a>';\n    html += '</div>';\n    const buttons = [\n        (0,_Button__WEBPACK_IMPORTED_MODULE_1__.dialogButton)(\"< Main Menu\", _Options__WEBPACK_IMPORTED_MODULE_2__.showUmmOptions),\n        (0,_Button__WEBPACK_IMPORTED_MODULE_1__.dialogButton)(\"Changelog\", () => alert(_Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.changelog)),\n        (0,_Button__WEBPACK_IMPORTED_MODULE_1__.dialogButtonClose)()\n    ];\n    window.dialog({\n        html: html,\n        title: `${_Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.title} v${_Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.version} - About`,\n        id: 'umm-options',\n        width: 350,\n        buttons: buttons\n    });\n};\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/UI/Dialog/About.ts?\n}");

/***/ },

/***/ "./src/UI/Dialog/Button.ts"
/*!*********************************!*\
  !*** ./src/UI/Dialog/Button.ts ***!
  \*********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dialogButton: () => (/* binding */ dialogButton),\n/* harmony export */   dialogButtonClose: () => (/* binding */ dialogButtonClose)\n/* harmony export */ });\nconst dialogButton = (label, callback) => {\n    return {\n        text: label,\n        click: callback,\n        class: \"umm-dialog-button\"\n    };\n};\nconst dialogButtonClose = () => {\n    // return dialogButton(\"Close\", function () { $(this).dialog(\"close\") });\n    return dialogButton(\"Close\", event => {\n        // jquery-ui and arrow functions won't work well\n        const dialog = $(event.currentTarget).parents(\".ui-dialog\").children(\".ui-dialog-content\");\n        dialog.dialog(\"close\");\n    });\n};\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/UI/Dialog/Button.ts?\n}");

/***/ },

/***/ "./src/UI/Dialog/Options.ts"
/*!**********************************!*\
  !*** ./src/UI/Dialog/Options.ts ***!
  \**********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   showUmmOptions: () => (/* binding */ showUmmOptions)\n/* harmony export */ });\n/* harmony import */ var _Main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Main */ \"./src/Main.ts\");\n/* harmony import */ var _About__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./About */ \"./src/UI/Dialog/About.ts\");\n/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Button */ \"./src/UI/Dialog/Button.ts\");\n\n\n\nconst button = (label, click) => {\n    return $(\"<a>\", { text: label, click });\n};\nconst showUmmOptions = () => {\n    var _a, _b, _c;\n    const ummState = _Main__WEBPACK_IMPORTED_MODULE_0__.main.state.get();\n    const html = $(\"<div>\", { class: \"umm-options-list\" }).append($(\"<b>\", { text: \"Banner data\" }), $(\"<br>\"), 'Banner name: <b><span>' + ((_a = ummState.missionSetName) !== null && _a !== void 0 ? _a : \"N/A\") + '</span></b><br>', 'Banner description: <b><span>' + ((_b = ummState.missionSetDescription) !== null && _b !== void 0 ? _b : \"N/A\") + '</span></b><br>', 'Mission title format: <b><span>' + ((_c = ummState.titleFormat) !== null && _c !== void 0 ? _c : \"N/A\") + '</span></b> <span title=\"Title format allows:&#10;N = Mission number without leading 0 (if required by banner length)&#10;NN = Mission number with leading 0&#10;M = Planned banner length&#10;T = (mission title)&#10; &#10;eg. T N-M or NN.M T\">(?)</span><br>', 'Planned banner length: <b><span>' + ummState.plannedBannerLength + '</span></b> <span title=\"Length your banner is going to be. Will be used for mission titles and to make sure you don\\'t create too many.\">(?)</span><br>', (ummState.plannedBannerLength % 6 != 0 ? '<span style=\"color: red;\"><b>Warning:</b></span> banner length is not a multiple of 6<br>' : '<br><b>Active mission data</b><br>'), 'Active mission: <b><span id=\"umm-active-mission-no\">' + (ummState.currentMission + 1) + '</span></b><br>', 'Active mission title: <b><span id=\"umm-active-mission-title\">' + (ummState.missions[ummState.currentMission].missionTitle || \"N/A\") + '</span></b><br>', 'Active mission portal count: <b><span id=\"umm-active-mission-no-portals\">' + ummState.missions[ummState.currentMission].portals.length + '</span></b><br>', $(\"<br>\"), $(\"<b>\", { text: \"Mission options\" }), $(\"<br>\"), 'Layers: <label style=\"user-select: none\"><input type=\"checkbox\" onclick=\"window.plugin.umm.toggleLayerPaths(this.checked)\" id=\"umm-layercheckbox-paths\"' + (window.map.hasLayer(_Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.ummMissionPaths) ? ' checked' : '') + '>Mission Paths</label> <label style=\"user-select: none\"><input type=\"checkbox\" onclick=\"window.plugin.umm.toggleLayerNumbers(this.checked)\" id=\"umm-layercheckbox-numbers\"' + (window.map.hasLayer(_Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.ummMissionNumbers) ? ' checked' : '') + '>Mission Numbers</label>', button(\"Edit banner details\", _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.editMissionSetDetails), button(\"Change active mission #\", _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.editActiveMission), button(\"Zoom to view all missions\", _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.zoomAllMissions), $(\"<hr>\"), button(\"Split mission\", _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.splitMissionOptions), button(\"Merge missions\", _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.mergeMissions), button(\"Reverse mission\", _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.reverseMission), $(\"<hr>\"), '<a onclick=\"if (confirm(\\'Are you sure you want to clear ALL missions data?\\')) window.plugin.umm.clearMissionData(); return false;\">Clear ALL missions data</a>', '<b>Import/Export</b><br>', button(\"Export banner data to file\", _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.exportData), '<div style=\"width:80%; margin: auto;\"><b>Import banner data from file:</b><br>', '<input type=\"file\" id=\"umm-import-file\"></input></div>');\n    window.dialog({\n        html: html,\n        title: `${_Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.title} v${_Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.version}`,\n        id: 'umm-options',\n        width: 350,\n        buttons: [\n            (0,_Button__WEBPACK_IMPORTED_MODULE_2__.dialogButton)(\"About this plugin\", _About__WEBPACK_IMPORTED_MODULE_1__.about),\n            (0,_Button__WEBPACK_IMPORTED_MODULE_2__.dialogButtonClose)()\n        ],\n    });\n    $(\"#umm-import-file\").on('change', (event) => {\n        if (confirm(\"Are you sure you want to overwrite the current mission data?\")) {\n            _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.loadFile(event);\n        }\n    });\n};\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/UI/Dialog/Options.ts?\n}");

/***/ },

/***/ "./src/UI/Notification.ts"
/*!********************************!*\
  !*** ./src/UI/Notification.ts ***!
  \********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   notification: () => (/* binding */ notification)\n/* harmony export */ });\nlet notificationTimer;\nconst notification = (notificationText, isPersistent = false) => {\n    $('.umm-notification').hide();\n    const notification = $('.umm-notification').text(notificationText);\n    notification.html(notification.html().replace(/\\n/g, '<br/>'));\n    $('.umm-notification').show();\n    window.clearTimeout(notificationTimer);\n    if (!isPersistent) {\n        notificationTimer = window.setTimeout(() => {\n            $('.umm-notification').fadeOut(400);\n        }, 3000);\n    }\n};\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/UI/Notification.ts?\n}");

/***/ },

/***/ "./src/UI/RenderNumbers.ts"
/*!*********************************!*\
  !*** ./src/UI/RenderNumbers.ts ***!
  \*********************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderNumbers: () => (/* binding */ RenderNumbers)\n/* harmony export */ });\n/* harmony import */ var _Main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Main */ \"./src/Main.ts\");\n\nconst MIN_PORTALS_PER_MISSION = 6;\nclass RenderNumbers {\n    constructor(ummMissionNumbers) {\n        this.missionNumbers = ummMissionNumbers;\n    }\n    redraw() {\n        this.missionNumbers.clearLayers();\n        const state = _Main__WEBPACK_IMPORTED_MODULE_0__.main.state;\n        const starts = this.getMissionStarts(state);\n        starts.forEach(start => {\n            const id = start.missionIndex;\n            const icon = this.generateMarker(state.isCurrent(id) ? \"active\" : \"start\", id + 1);\n            const marker = L.marker(start.location, {\n                icon: L.divIcon({\n                    className: 'umm-mission-icon',\n                    iconSize: [34, 50],\n                    iconAnchor: [17, 50],\n                    html: icon,\n                }),\n                opacity: start.auto ? 0.4 : 1,\n                interactive: false\n            });\n            this.missionNumbers.addLayer(marker);\n        });\n    }\n    getMissionStarts(state) {\n        const missions = [];\n        let mid = 0;\n        while (mid < state.missions.count()) {\n            const mission = state.missions.get(mid);\n            if (mission === null || mission === void 0 ? void 0 : mission.hasPortals()) {\n                const start = mission.getLocations()[0]; // TODO optimize; this converts all portals to LatLng while only the first is needed\n                missions.push({\n                    missionIndex: mid,\n                    location: start,\n                    auto: false\n                });\n            }\n            // count empty mission + 1\n            let count = 1;\n            for (; mid + count <= state.missions.count(); count++) {\n                const nextMission = state.missions.get(mid + count);\n                if (nextMission === null || nextMission === void 0 ? void 0 : nextMission.hasPortals()) {\n                    break;\n                }\n            }\n            if (count > 1) {\n                // Fill in auto numbers for empty missions\n                const allLocations = [];\n                for (let i = 0; i < count - 1; i++) {\n                    const fillMission = state.missions.get(mid + i);\n                    if (fillMission === null || fillMission === void 0 ? void 0 : fillMission.hasPortals()) { // NOTE: only the first (i=0) should have portals\n                        allLocations.push(...fillMission.getLocations());\n                    }\n                }\n                const portalsPerMission = Math.max(allLocations.length / count, MIN_PORTALS_PER_MISSION);\n                for (let fillIndex = 1; fillIndex < count; fillIndex++) {\n                    const locationIndex = Math.floor(portalsPerMission * fillIndex);\n                    if (locationIndex < allLocations.length - 1) {\n                        missions.push({\n                            missionIndex: mid + fillIndex,\n                            location: allLocations[locationIndex],\n                            auto: true\n                        });\n                    }\n                }\n            }\n            mid += count;\n        }\n        return missions;\n    }\n    generateMarker(kclass, index) {\n        return `<svg id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 33 49\" class=\"umm-mission-marker\"><defs><style>.cls-2{fill:#fff;}</style></defs><path class=\"${kclass}\" d=\"M33,18c0,8.84-12,31-16,31S1,26.84,1,18,8.16,1,17,1,33,9.16,33,18Z\" transform=\"translate(-0.5 -0.5)\"/><circle class=\"cls-2\" cx=\"16.5\" cy=\"16.5\" r=\"13\"/><foreignObject x=\"0\" y=\"0\" width=\"34px\" height=\"34px\"><span class=\"umm-mission-number\">${index}</span></foreignObject></svg>`;\n    }\n}\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/UI/RenderNumbers.ts?\n}");

/***/ },

/***/ "./src/UI/RenderPath.ts"
/*!******************************!*\
  !*** ./src/UI/RenderPath.ts ***!
  \******************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderPath: () => (/* binding */ RenderPath)\n/* harmony export */ });\n/* harmony import */ var _Main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Main */ \"./src/Main.ts\");\n/* harmony import */ var _Notification__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Notification */ \"./src/UI/Notification.ts\");\n\n\n// TODO: D&D should be handled elsewhere\nclass RenderPath {\n    constructor(ummMissionPaths) {\n        this.missionPaths = ummMissionPaths;\n        this.touchIcon = L.Browser.touch ?\n            new L.DivIcon({\n                iconSize: new L.Point(20, 20),\n                className: \"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon\"\n            }) :\n            new L.DivIcon({\n                iconSize: new L.Point(8, 8),\n                className: \"leaflet-div-icon leaflet-editing-icon\"\n            });\n    }\n    redraw() {\n        this.missionPaths.clearLayers();\n        const editMode = _Main__WEBPACK_IMPORTED_MODULE_0__.main.umm.missionModeActive;\n        _Main__WEBPACK_IMPORTED_MODULE_0__.main.state.missions.forEach((mission, missionId) => {\n            if (_Main__WEBPACK_IMPORTED_MODULE_0__.main.state.isCurrent(missionId) && editMode) {\n                this.drawEditMission(missionId, mission);\n            }\n            else\n                this.drawMission(mission);\n        });\n    }\n    drawMission(mission) {\n        const geodesicPolyline = new L.GeodesicPolyline(mission.getLocations(), {\n            color: \"crimson\",\n            weight: 5,\n            smoothFactor: 1\n        });\n        this.missionPaths.addLayer(geodesicPolyline);\n    }\n    // let _draggingLine = undefined;\n    drawEditMission(missionId, mission) {\n        const coordinatesList = mission.getLocations();\n        // Portal Markers\n        coordinatesList.forEach((ll, index) => this.createDragMarker(ll, index, missionId));\n        // MidPoint Marker\n        coordinatesList.forEach((ll, index) => {\n            if (index > 0) {\n                const half = this.getCenter(coordinatesList[index - 1], ll);\n                this.createDragMarker(half, index, missionId, true);\n            }\n        });\n        const geodesicPolyline = new L.GeodesicPolyline(coordinatesList, {\n            color: \"#ff9a00\",\n            weight: 5,\n            smoothFactor: 1\n        });\n        this.missionPaths.addLayer(geodesicPolyline);\n    }\n    createDragMarker(location, portalId, missionId, dummy = false) {\n        const marker = new L.Marker(location, {\n            icon: this.touchIcon,\n            draggable: true,\n            zIndexOffset: 7000,\n            opacity: dummy ? 0.4 : 1,\n            portal: portalId,\n            missionId: missionId,\n            isMidPoint: dummy\n        });\n        this.missionPaths.addLayer(marker);\n        marker\n            .on(\"drag\", event => { this.onMarkerDrag(event); })\n            .on(\"dragstart\", event => { this.onMarkerDragStart(event); })\n            .on(\"dragend\", event => { this.onMarkerDragEnd(event); })\n            .on(\"dblclick\", event => { this.onMarkerDblClick(event); });\n    }\n    getCenter(l1, l2) {\n        const p1 = window.map.project(l1);\n        const p2 = window.map.project(l2);\n        return window.map.unproject(p1.add(p2).divideBy(2));\n    }\n    onMarkerDragStart(event) {\n        const marker = event.target;\n        const options = event.target.options;\n        const isMidPoint = options.isMidPoint;\n        const mission = _Main__WEBPACK_IMPORTED_MODULE_0__.main.state.missions.get(options.missionId);\n        console.assert(mission);\n        if (this.editDragLine) {\n            this.missionPaths.removeLayer(this.editDragLine);\n        }\n        const portal = options.portal;\n        const portal_pre = portal > 0 ? mission.portals.get(portal - 1) : undefined;\n        const portal_post = mission.portals.get(portal + (isMidPoint ? 0 : 1));\n        let lls = [\n            portal_pre && new L.LatLng(portal_pre.location.latitude, portal_pre.location.longitude),\n            marker.getLatLng(),\n            portal_post && new L.LatLng(portal_post.location.latitude, portal_post.location.longitude)\n        ];\n        // special-case:\n        // single portal\n        if (!portal_pre && !portal_post)\n            lls = [marker.getLatLng(), marker.getLatLng()];\n        // is start portal\n        else if (!portal_pre)\n            lls.splice(0, 1);\n        // is end portal \n        else if (!portal_post)\n            lls = [lls[1], lls[0]];\n        this.editDragLine = new L.Polyline(lls, {\n            color: \"#ff9a00\",\n            weight: 3,\n            dashArray: '5,5',\n            pointerEvents: 'none'\n        });\n        this.missionPaths.addLayer(this.editDragLine);\n    }\n    onMarkerDrag(event) {\n        if (!this.editDragLine)\n            return;\n        const marker = event.target;\n        const options = event.target.options;\n        const mission = _Main__WEBPACK_IMPORTED_MODULE_0__.main.state.missions.get(options.missionId);\n        console.assert(mission);\n        const snappedPortal = this.getSnapPortal(marker.getLatLng(), mission.getLocations());\n        const newTarget = snappedPortal ? snappedPortal.getLatLng() : marker.getLatLng();\n        const latlngs = this.editDragLine.getLatLngs();\n        const index = latlngs.length === 3 ? 1 : 0;\n        latlngs[index] = newTarget;\n        this.editDragLine.setLatLngs(latlngs);\n    }\n    onMarkerDragEnd(event) {\n        if (this.editDragLine) {\n            this.missionPaths.removeLayer(this.editDragLine);\n            this.editDragLine = undefined;\n        }\n        const marker = event.target;\n        const options = event.target.options;\n        const mission = _Main__WEBPACK_IMPORTED_MODULE_0__.main.state.missions.get(options.missionId);\n        console.assert(mission);\n        const coordinatesList = mission.getLocations();\n        const snappedPortal = this.getSnapPortal(marker.getLatLng(), coordinatesList);\n        if (!snappedPortal) {\n            this.redraw();\n            return;\n        }\n        // insert portal\n        const portalToAdd = mission.portals.create(snappedPortal.options.guid);\n        if (options.isMidPoint)\n            mission.portals.insert(options.portal, portalToAdd);\n        else\n            this.movePortal(mission, options.portal, portalToAdd);\n        this.saveStateAndRefresh();\n    }\n    movePortal(mission, portalID, target) {\n        // drag portal to last mission -> merge?\n        if (portalID === 0) {\n            const missions = _Main__WEBPACK_IMPORTED_MODULE_0__.main.state.missions;\n            const preMission = missions.previous(mission);\n            if (preMission === null || preMission === void 0 ? void 0 : preMission.portals.isEnd(target)) {\n                if (confirm(\"Merge mission ?\")) {\n                    missions.merge(preMission, mission);\n                    _Main__WEBPACK_IMPORTED_MODULE_0__.main.state.get().currentMission = preMission.id;\n                    return;\n                }\n            }\n            else if (mission.portals.length === 1 && (preMission === null || preMission === void 0 ? void 0 : preMission.portals.includes(target))) {\n                if (confirm(\"Split mission ?\")) {\n                    const index = preMission.portals.indexOf(target);\n                    mission.portals.clear();\n                    missions.split(preMission, index, mission);\n                    return;\n                }\n            }\n        }\n        // drag portal to next mission -> merge?\n        if (portalID === mission.portals.length - 1) {\n            const missions = _Main__WEBPACK_IMPORTED_MODULE_0__.main.state.missions;\n            const postMission = missions.next(mission);\n            if (postMission === null || postMission === void 0 ? void 0 : postMission.portals.isStart(target)) {\n                if (confirm(\"Merge mission ?\")) {\n                    missions.merge(mission, postMission);\n                    return;\n                }\n            }\n        }\n        mission.portals.set(portalID, target);\n    }\n    getSnapPortal(unsnappedLatLng, ignore = []) {\n        const containerPoint = window.map.latLngToContainerPoint(unsnappedLatLng);\n        let candidates = [];\n        for (const guid in window.portals) {\n            const portal = window.portals[guid];\n            const ll = portal.getLatLng();\n            if (ignore.some(x => x.equals(ll)))\n                continue;\n            const pp = window.map.latLngToContainerPoint(ll);\n            const options = portal.options; // missing Leaflet typing\n            const size = options.weight + options.radius * 5; // allow some extra space for easier snapping\n            const distance = pp.distanceTo(containerPoint);\n            if (distance > size)\n                continue;\n            candidates.push([distance, portal]);\n        }\n        if (candidates.length === 0)\n            return;\n        candidates = candidates.sort((a, b) => a[0] - b[0]);\n        return candidates[0][1];\n    }\n    ;\n    onMarkerDblClick(event) {\n        const options = event.target.options;\n        const portal = options.portal;\n        if (options.isMidPoint)\n            return;\n        const mission = _Main__WEBPACK_IMPORTED_MODULE_0__.main.state.missions.get(options.missionId);\n        console.assert(mission);\n        mission.portals.remove(portal);\n        this.saveStateAndRefresh();\n        (0,_Notification__WEBPACK_IMPORTED_MODULE_1__.notification)(`${mission.title}\\nRemoved #${portal + 1} from mission`);\n    }\n    saveStateAndRefresh() {\n        _Main__WEBPACK_IMPORTED_MODULE_0__.main.state.save();\n        _Main__WEBPACK_IMPORTED_MODULE_0__.main.redrawAll();\n    }\n}\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/UI/RenderPath.ts?\n}");

/***/ },

/***/ "./src/styles.css"
/*!************************!*\
  !*** ./src/styles.css ***!
  \************************/
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_styles_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./styles.css */ \"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./src/styles.css\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_styles_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_styles_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_styles_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_1_use_1_node_modules_postcss_loader_dist_cjs_js_ruleSet_1_rules_1_use_2_styles_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n\n\n//# sourceURL=webpack:///iitc_plugin_UMM_Ext/./src/styles.css?\n}");

/***/ }

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Check if module exists (development only)
/******/ 		if (__webpack_modules__[moduleId] === undefined) {
/******/ 			var e = new Error("Cannot find module '" + moduleId + "'");
/******/ 			e.code = 'MODULE_NOT_FOUND';
/******/ 			throw e;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/Main.ts");
/******/ 	
/******/ })()
;
};
(function () {
  const info = {};
  if (typeof GM_info !== 'undefined' && GM_info && GM_info.script)
    info.script = { version: GM_info.script.version, name: GM_info.script.name, description: GM_info.script.description };
  if (typeof unsafeWindow != 'undefined' || typeof GM_info == 'undefined' || GM_info.scriptHandler != 'Tampermonkey') {
    const script = document.createElement('script');
    script.appendChild(document.createTextNode( '('+ wrapper +')('+JSON.stringify(info)+');'));
    document.head.appendChild(script);} 
  else wrapper(info);
})();